<?xml version="1.0" encoding="UTF-8"?>

<Values version="2.0">
  <value name="name">addFile</value>
  <array name="sig" type="value" depth="1">
    <value>[i] field:0:required contentID</value>
    <value>[i] field:0:required fileName</value>
    <value>[i] field:0:required fileInputStream</value>
    <value>[i] field:0:required friendlyName</value>
    <value>[i] field:0:required nodeID</value>
    <value>[i] object:0:optional metadataMap</value>
    <value>[o] field:0:required contentID</value>
    <value>[o] field:0:required fileID</value>
    <value>[o] field:0:required status</value>
  </array>
  <value name="sigtype">java 3.5</value>
  <value name="encodeutf8">true</value>
  <value name="body">SURhdGFDdXJzb3IgY3Vyc29yID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7DQpTdHJpbmcgY29udGVu
dElEID0gSURhdGFVdGlsLmdldFN0cmluZyhjdXJzb3IsICJjb250ZW50SUQiKTsNClN0cmluZyBm
aWxlTmFtZSA9IElEYXRhVXRpbC5nZXRTdHJpbmcoY3Vyc29yLCAiZmlsZU5hbWUiKTsNCk9iamVj
dCBpbnB1dCA9IElEYXRhVXRpbC5nZXQoY3Vyc29yLCAiZmlsZUlucHV0U3RyZWFtIik7DQpTdHJp
bmcgcmVwb05hbWUgPSBJRGF0YVV0aWwuZ2V0U3RyaW5nKGN1cnNvciwgImZyaWVuZGx5TmFtZSIp
Ow0KU3RyaW5nIG5vZGVJRFN0cmluZyA9IElEYXRhVXRpbC5nZXRTdHJpbmcoY3Vyc29yLCAibm9k
ZUlEIik7DQpPYmplY3QgbWV0YWRhdGFNYXAgPSBJRGF0YVV0aWwuZ2V0KGN1cnNvciwgIm1ldGFk
YXRhTWFwIik7DQpJRGF0YVV0aWwucmVtb3ZlKGN1cnNvciwgIm1ldGFkYXRhTWFwIik7DQpjdXJz
b3IuZGVzdHJveSgpOw0KSW5wdXRTdHJlYW0gc3RyZWFtID0gbnVsbDsNCmlmIChtZXRhZGF0YU1h
cCAhPSBudWxsKSB7DQoJdXRpbC5sb2dnZXIuZXJyb3IobWV0YWRhdGFNYXAuZ2V0Q2xhc3MoKS50
b1N0cmluZygpKTsNCn0NCmlmIChtZXRhZGF0YU1hcCBpbnN0YW5jZW9mIFN0cmluZykgew0KCVN0
cmluZyBzdHJpbmdNYXAgPSAoU3RyaW5nKSBtZXRhZGF0YU1hcDsNCgltZXRhZGF0YU1hcCA9IG5l
dyBIYXNoTWFwPFN0cmluZywgU3RyaW5nPigpOw0KCXN0cmluZ01hcCA9IHN0cmluZ01hcC5yZXBs
YWNlQWxsKCJ9IiwgIiIpOw0KCVN0cmluZ1tdIG1hcFZhbHVlcyA9IHN0cmluZ01hcC5zcGxpdCgi
LCIpOw0KCWZvciAoU3RyaW5nIHZhbHVlUGFpciA6IG1hcFZhbHVlcykgew0KCQlTdHJpbmdbXSBr
ZXlQYWlyID0gdmFsdWVQYWlyLnNwbGl0KCI9Iik7DQoJCVN0cmluZyBrZXkgPSBrZXlQYWlyWzBd
Ow0KCQlTdHJpbmcgdmFsdWUgPSBrZXlQYWlyWzFdOw0KCQkoKEhhc2hNYXA8U3RyaW5nLCBTdHJp
bmc+KSBtZXRhZGF0YU1hcCkucHV0KGtleSwgdmFsdWUpOw0KCX0NCn0NCg0KdHJ5IHsNCglpZiAo
aW5wdXQgaW5zdGFuY2VvZiBTdHJpbmcpIHsNCgkJRmlsZSBmaWxlID0gbmV3IEZpbGUoKFN0cmlu
ZykgaW5wdXQpOw0KCQlpZiAoZmlsZS5leGlzdHMoKSkgew0KCQkJc3RyZWFtID0gbmV3IEZpbGVJ
bnB1dFN0cmVhbShmaWxlKTsNCgkJfSBlbHNlIHsNCgkJCWJ5dGVbXSBieXRlcyA9IEJhc2U2NC5k
ZWNvZGUoKChTdHJpbmcpIGlucHV0KS5nZXRCeXRlcygpKTsNCgkJCXN0cmVhbSA9IG5ldyBCeXRl
QXJyYXlJbnB1dFN0cmVhbShieXRlcyk7DQoJCX0NCgl9IGVsc2UgaWYgKGlucHV0IGluc3RhbmNl
b2YgSW5wdXRTdHJlYW0pIHsNCgkJc3RyZWFtID0gKElucHV0U3RyZWFtKSBpbnB1dDsNCgl9DQp9
IGNhdGNoIChFeGNlcHRpb24gZSkgew0KCVN0cmluZ1dyaXRlciByZXN1bHQgPSBuZXcgU3RyaW5n
V3JpdGVyKCk7DQoJUHJpbnRXcml0ZXIgcHJpbnRXcml0ZXIgPSBuZXcgUHJpbnRXcml0ZXIocmVz
dWx0KTsNCgllLnByaW50U3RhY2tUcmFjZShwcmludFdyaXRlcik7DQoJdXRpbC5sb2dnZXIuZXJy
b3IocmVzdWx0LnRvU3RyaW5nKCkpOw0KCWUucHJpbnRTdGFja1RyYWNlKCk7DQp9DQoNCkVDb250
ZW50UmVwb3NpdG9yeSByZXBvID0gdXRpbC5nZXRSZXBvKHJlcG9OYW1lKTsNClN0cmluZyBzdGF0
dXMgPSAiIjsNCkNTUENvbnRlbnRPYmplY3QgZmlsZUNvbnRlbnQgPSBudWxsOw0KU3RyaW5nIGZp
bGVJRCA9ICIiOw0KYm9vbGVhbiBjb250ZW50VmFsaWQgPSB0cnVlOw0KaWYgKGNvbnRlbnRJRCA9
PSBudWxsKSB7DQoJaWYgKG5vZGVJRFN0cmluZyA9PSBudWxsKSB7DQoJCWNvbnRlbnRWYWxpZCA9
IGZhbHNlOw0KCX0gZWxzZSB7DQoJCWNvbnRlbnQuY3JlYXRlQ29udGVudElEKHBpcGVsaW5lKTsN
CgkJY3Vyc29yID0gcGlwZWxpbmUuZ2V0Q3Vyc29yKCk7DQoJCWNvbnRlbnRJRCA9IElEYXRhVXRp
bC5nZXRTdHJpbmcoY3Vyc29yLCAiY29udGVudElEIik7DQoJCWN1cnNvci5kZXN0cm95KCk7DQoJ
fQ0KfQ0KDQppZiAocmVwbyA9PSBudWxsKSB7DQoJc3RhdHVzID0gIkZhaWxlZDogUmVwb3NpdG9y
eSAoIiArIHJlcG9OYW1lDQoJCQkrICIpIG5vdCBjb25maWd1cmVkLCBwbGVhc2UgZmlyc3QgcnVu
IGFkZENvbm5lY3Rpb24uIjsNCn0gZWxzZSBpZiAoY29udGVudFZhbGlkKSB7DQoJU3RyaW5nW10g
ZmlsZU5hbWVzID0geyBmaWxlTmFtZSB9Ow0KCVN0cmluZyB0YXJnZXRQYXRoID0gInNtaTovLyIg
KyByZXBvTmFtZSArICIvdG1wLyIgKyBmaWxlTmFtZTsNCglpZiAocmVwbyAhPSBudWxsKSB7DQoJ
CXRyeSB7DQoJCQlpZiAoIXJlcG8uaXNMaXZlKCkpIHsNCgkJCQlyZXBvLmdldFJlcG8oKTsNCgkJ
CX0NCgkJCWludCBub2RlSUQ7DQoJCQlpZiAobm9kZUlEU3RyaW5nID09IG51bGwpIHsNCgkJCQlu
b2RlSUQgPSByZXBvLmdldE5vZGVJRE9mQ29udGVudElEKGNvbnRlbnRJRCk7DQoJCQl9IGVsc2Ug
ew0KCQkJCW5vZGVJRCA9IEludGVnZXIudmFsdWVPZihub2RlSURTdHJpbmcpOw0KCQkJfQ0KCQkJ
aW50W10gbm9kZUlEcyA9IHsgbm9kZUlEIH07DQoJCQlyZXBvLmFkZE9iamVjdFN0cmVhbShjb250
ZW50SUQsIG5vZGVJRHMsIHN0cmVhbSwgZmlsZU5hbWVzLA0KCQkJCQlyZXBvTmFtZSwgdGFyZ2V0
UGF0aCwgbmV3IFN0cmluZ1tdIHsgIiIgfSk7DQoJCQlpZiAobWV0YWRhdGFNYXAgIT0gbnVsbCkg
ew0KCQkJCXJlcG8uYWRkTWV0YWRhdGEoY29udGVudElELA0KCQkJCQkJKEhhc2hNYXA8U3RyaW5n
LCBTdHJpbmc+KSBtZXRhZGF0YU1hcCk7DQoJCQl9DQoJCQlTdHJpbmcgYXR0YWNobWVudCA9IHJl
cG8uZ2V0QXR0YWNobWVudElEKGNvbnRlbnRJRCwNCgkJCQkJZmlsZU5hbWUsIHRydWUpOw0KCQkJ
ZmlsZUNvbnRlbnQgPSBDU1BDb250ZW50T2JqZWN0LnJlYWRYTUxTdHJpbmcoYXR0YWNobWVudCwN
CgkJCQkJcmVwby5nZXRSZXRyaWV2YWwoKSwgcmVwby5nZXRTZXNzaW9uKCkpOw0KCQkJaWYgKGZp
bGVDb250ZW50ICE9IG51bGwpIHsNCgkJCQlmaWxlSUQgPSBmaWxlQ29udGVudC5nZXRGaWxlSUQo
KTsNCgkJCX0NCgkJCXN0YXR1cyA9ICJTdWNjZXNzOiBBZGRlZCAiICsgZmlsZU5hbWUgKyAiIHRv
ICIgKyBjb250ZW50SUQNCgkJCQkJKyAiLiI7DQoJCX0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQoJ
CQlTdHJpbmdXcml0ZXIgcmVzdWx0ID0gbmV3IFN0cmluZ1dyaXRlcigpOw0KCQkJUHJpbnRXcml0
ZXIgcHJpbnRXcml0ZXIgPSBuZXcgUHJpbnRXcml0ZXIocmVzdWx0KTsNCgkJCWUucHJpbnRTdGFj
a1RyYWNlKHByaW50V3JpdGVyKTsNCgkJCXV0aWwubG9nZ2VyLmVycm9yKHJlc3VsdC50b1N0cmlu
ZygpKTsNCgkJCWUucHJpbnRTdGFja1RyYWNlKCk7DQoJCQlzdGF0dXMgPSAiRmFpbGVkOiBVbmFi
bGUgdG8gYWRkIEZpbGUgdG8gY29udGVudElEICINCgkJCQkJKyBjb250ZW50SUQgKyAiLiI7DQoJ
CX0NCgl9DQp9DQpjdXJzb3IgPSBwaXBlbGluZS5nZXRDdXJzb3IoKTsNCklEYXRhVXRpbC5wdXQo
Y3Vyc29yLCAic3RhdHVzIiwgc3RhdHVzKTsNCklEYXRhVXRpbC5wdXQoY3Vyc29yLCAiZmlsZUlE
IiwgZmlsZUlEKTsNCklEYXRhVXRpbC5wdXQoY3Vyc29yLCAiY29udGVudElEIiwgY29udGVudElE
KTsNCmN1cnNvci5kZXN0cm95KCk7DQo=</value>
</Values>
